常用的数据库存储引擎
==
MyISAM：最常用的非事务型存储引擎  
CSV：以csv格式存储的非事务型存储引擎（适合做数据交换的中间表）  
Archive：只允许查询和新增，不允许修改  
INNODB：最常用的事务型存储引擎

MyISAM
--
- 非事务型存储引擎  
- 以堆表方式存储：  
1）存储时没有任何特定顺序，不像聚集索引表中的数据会按照聚集索引的顺序存储；  
2）叶子节点指向数据的物理位置  
- 表级锁  
1）读：共享锁  
2）写：排它锁  
两种锁相互阻塞  
- 支持Btree索引，空间索引，全文索引

这类的数据表经常会出现索引文件损坏，使用check table检查表，使用repair table修复

**性能及应用场景**  
不适合做高并发，因为读写两者会互相阻塞  
1）适合读操作远远大于写的场景  
2）不需要使用事务的场景  

INNODB
--
- 完全支持事务的：原子性（A）,一致性（C）,隔离性（D）,持久性（I）。在事务型的场景下不要混合使用事务型和非事务型引擎，因为非事务型无法回滚。
- 数据按主键聚集存储
- 支持行级锁及MVCC（多版本并发控制）
- 支持Btree和自适应hash索引（自建，不可人为控制）
- v5.6+支持全文索引，v5.7+支持空间索引

**应用场景**  
大多数OLTP场景（面向交易的处理过程）

**INNODB不支持在线修改表结构的场景**  
1.加全文索引    
2.加空间索引  
3.删除主键    
4.增加自增列  
5.修改列类型  
6.修改字符集

**INNODB是如何实现事务**
- 一个事务中的所有操作要么全部完成，要么全部不完成，不会结束在中间的某个环节——原子性
- 在事务开始之前和事务结束之后，数据库的完整性没有被破坏——一致性
- 要求每个读写事务的对象与其他事务的操作对象能相互分离，即该事务提交前对其他事务都不可见——隔离性（分级别、锁）
- 事务一旦提交了，其结果就是永久性的，就算发生了宕机，数据库也能将数据恢复

**事务的实现方式**
- 回滚日志（Undo log）：用于记录数据修改前的状态——原子性
- 重作日志（Redo log）：用于记录数据修改后的状态——一致性
- 隔离性：锁：用于资源隔离，分为共享锁和排它锁
- 持久性：重作日志（Redo log）+ 回滚日志（Undo log）=恢复数据

**锁之间的兼容关系**
- 查询需要对资源进行共享锁  
- 只有共享锁与共享锁之间可兼容，其他不兼容

